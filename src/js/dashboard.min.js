$(function(){function e(){$(".proofContainer").show(),$(".uploadBtn").show()}function t(){transaction_notify_grid.resize(),finishedDocGrid.resize(),customer_grid.resize(),todays_transactions.resize(),todays_transactions_rewards.resize(),available_rewards_var_grid.resize(),loyalty_todays_transaction.resize(),loyalty_available_loyalty_program.resize(),gift_card_available_gift_card_program.resize()}function a(){var e=s.value(),t=c.value();e?(e=new Date(e),e.setDate(e.getDate()),c.min(e)):t?s.max(new Date(t)):(t=new Date,s.max(t),c.min(t))}function i(){var e=c.value(),t=s.value();e?(e=new Date(e),e.setDate(e.getDate()),s.max(e)):t?c.min(new Date(t)):(e=new Date,s.max(e),c.min(e))}$('a[href="#rewards"],a[href="#loyalty"],a[href="#giftcard"]').on("shown.bs.tab",function(e){e.target,e.relatedTarget,$("#planType").html(""),$("#planType").html("GOOD")}),$('a[href="#overview"],a[href="#transactions"]').on("shown.bs.tab",function(e){e.target,e.relatedTarget,$("#planType").html(""),$("#planType").html("FREE")}),$('a[href="#transactions"],a[href="#rewards"],a[href="#loyalty"],a[href="#giftcard"]').on("shown.bs.tab",function(e){e.target,e.relatedTarget,$("#settingsContainer").hide(),$("#KYCVerification").hide()}),$('a[href="#overview"]').on("shown.bs.tab",function(e){e.target,e.relatedTarget,$("#settingsContainer").show()}),$('a[href="#giftcardcustomer"]').on("shown.bs.tab",function(e){e.target,e.relatedTarget,$("#settingsContainer").hide(),$("#KYCVerification").hide()}),$("#uploadDocuments").hide(),$("#KYCForm").validate({rules:{proofOfIdentity:"required",proofOfAddress:"required"},messages:{proofOfIdentity:"Please Select Option",proofOfAddress:"Please Select Option"},errorElement:"span",errorPlacement:function(e,t){e.addClass("help-block"),t.parents(".checkbox").addClass("has-feedback"),"checkbox"===t.prop("type")?e.insertAfter(t.parent("label")):e.insertAfter(t),t.next("span")[0]||$("<span class='fa fa-times form-control-feedback'></span>").insertAfter(t)},success:function(e,t){$(t).next("span")[0]||$("<span class='fa fa-check form-control-feedback'></span>").insertAfter($(t))},highlight:function(e,t,a){$(e).parents(".checkbox").addClass("has-error").addClass("font-weight-bold").removeClass("has-success"),$(e).next("span").addClass("fa-times").removeClass("fa-check")},unhighlight:function(e,t,a){$(e).parents(".checkbox").addClass("has-success").addClass("font-weight-bold").removeClass("has-error"),$(e).next("span").addClass("fa-check").removeClass("fa-times")},submitHandler:function(e){$("#uploadDocuments").show(),$("#KYCVerification").hide()}}),$(".proofContainer").hide(),$(".uploadBtn").hide(),$("#documentItem").kendoComboBox({change:e});var r=$("#settings"),n=$("#settingsContainer");n.show(),r.on("click",function(e){e.preventDefault(),n.show(),$("#uploadDocuments").hide(),$("#KYCVerification").hide()});var o={sales_breakdown_criterion:function(){$('input[name="sales_breakdown_criterion"]').kendoComboBox({dataTextField:"text",dataValueField:"value",dataSource:[{text:"This Month",value:"This Month"},{text:"This Week",value:"This Week"},{text:"Rolling Day",value:"Rolling Day"}],filter:"contains",suggest:!0,index:0})},sales_trends_criterion:function(){$('input[name="sales_trends_criterion"]').kendoComboBox({dataTextField:"text",dataValueField:"value",dataSource:[{text:"Rolling Year",value:"Rolling Year"},{text:"Rolling Month",value:"Rolling Month"},{text:"Rolling Day",value:"Rolling Day"}],filter:"contains",suggest:!0,index:0})},gift_card_customer:function(){$('input[name="gift_card_customer"]').kendoComboBox({dataTextField:"text",dataValueField:"value",dataSource:[{text:"BOGO 1",value:"BOGO 1"},{text:"BOGO 2",value:"BOGO 2"},{text:"BOGO 3",value:"BOGO 3"}],filter:"contains",suggest:!0,index:0})},customers_criterion:function(){$('input[name="customers_criterion"]').kendoComboBox({dataTextField:"text",dataValueField:"value",dataSource:[{text:"This Month",value:"This Month"},{text:"This Week",value:"This Week"},{text:"This Year",value:"This Year"}],filter:"contains",suggest:!0,index:0})},report_criterion:function(){$('input[name="report_criterion"]').kendoComboBox({dataTextField:"text",dataValueField:"value",dataSource:[{text:"Today",value:"Today"},{text:"This Week",value:"This Week"},{text:"This Month",value:"This Month"},{text:"Year to date",value:"Year to date"}],filter:"contains",suggest:!0,index:0})},processing_status_criterion:function(){$('input[name="processing_status_criterion"]').kendoComboBox({dataTextField:"text",dataValueField:"value",dataSource:[{text:"Completed",value:"Completed"},{text:"Processing",value:"Processing"},{text:"Failed",value:"Failed"},{text:"Show All",value:"Show All"}],filter:"contains",suggest:!0,index:0})},manage_reward_program_criterion:function(){$('input[name="manage_reward_program_criterion"]').kendoComboBox({dataTextField:"text",dataValueField:"value",dataSource:[{text:"Program 1",value:"Program 1"},{text:"Program 2",value:"Program 2"},{text:"Program 3",value:"Program 3"},{text:"Program 4",value:"Program 4"}],filter:"contains",suggest:!0,index:0})},choose_business_criterion:function(){$('input[name="choose_business_criterion"]').kendoComboBox({dataTextField:"text",dataValueField:"value",dataSource:[{text:"Business 1",value:"Business 1"},{text:"Business 2",value:"Business 2"}],filter:"contains",suggest:!0,index:0})},withOutProperty:function(){$("#Country_of_business").kendoComboBox(),$("#timezone").kendoComboBox()}};o.sales_breakdown_criterion(),o.sales_trends_criterion(),o.gift_card_customer(),o.customers_criterion(),o.report_criterion(),o.processing_status_criterion(),o.manage_reward_program_criterion(),o.choose_business_criterion(),o.withOutProperty();var l={filterable:{pageable:{refresh:!0,pageSizes:!0,buttonCount:5},sortable:{mode:"multiple",allowUnsort:!0},filterable:!0,columnMenu:!0,groupable:!0,scrollable:!0,resizable:!0,reorderable:!0,dataBound:function(e){console.log("databound");var t=e.sender,a=t.element;a.find(".k-grouping-header").remove()}},extend:function(e,t){return $.extend(!0,{},this[e],t)}},d={transaction_notify_grid:function(){var e=$("#transaction_notify_grid").kendoGrid(l.extend("filterable",{columns:[{field:"contact",title:"Contact",width:250},{field:"mobile",title:"Mobile Number",width:250},{field:"webapi",title:"Web Hook API",width:500}],dataSource:{data:transactionNotify,pageSize:5,schema:{model:{id:"transactionID",fields:{transactionID:{editable:!1,nullable:!0},contact:{type:"string"},mobile:{type:"number"},webapi:{type:"string"}}}}}})).data("kendoGrid");e.hideColumn(3)},finishedDocGrid:function(){var e=$("#finishedDocGrid").kendoGrid(l.extend("filterable",{columns:[{field:"DocType",title:"Document Type"},{field:"FileName",title:"File Name"},{field:"DateUploaded",title:"Date Uploaded",template:"#= kendo.toString(DateUploaded, 'yyyy/MM/dd HH:mm') #"}],dataSource:{data:uploadedDoc,pageSize:5,schema:{model:{id:"uploadID",fields:{uploadID:{editable:!1,nullable:!0},DocType:{type:"string"},FileName:{type:"string"},DateUploaded:{type:"date"}}}}}})).data("kendoGrid");e.hideColumn(3)},customer_grid:function(){$("#customer_grid").kendoGrid(l.extend("filterable",{columns:[{field:"name",title:"Name",width:250},{field:"total_spend",title:"Total Spend",width:120},{field:"avg_spend",title:"Average Spend",width:150},{field:"total_visits",title:"Total Visits",width:120},{field:"last_visited",title:"Last Visited"}],dataSource:{data:customersDataArray,pageSize:5,schema:{model:{id:"customerID",fields:{customerID:{editable:!1,nullable:!0},name:{type:"string"},total_spend:{type:"string"},avg_spend:{type:"string"},total_visits:{type:"string"},last_visited:{type:"string"}}}}}})).data("kendoGrid")},todays_transactions:function(){$("#todays_transactions").kendoGrid(l.extend("filterable",{columns:[{field:"name",title:"Name",width:250},{field:"amount",title:"Amount",width:100},{field:"tip",title:"Tip",width:100},{field:"tax",title:"Tax",width:100},{field:"rewards",title:"Rewards",width:100},{field:"loyalty",title:"Loyalty",width:100},{field:"gift_card",title:"Gift Card",width:100},{field:"processing_fee",title:"Payment<br/>Type",width:130},{field:"sattlement_amount",title:"Settlement<br/>Amount",width:130}],dataSource:{data:todayTransactionArray,pageSize:5,schema:{model:{id:"trasactionID",fields:{trasactionID:{editable:!1,nullable:!0},name:{type:"string"},amount:{type:"string"},tip:{type:"string"},tax:{type:"string"},rewards:{type:"string"},loyalty:{type:"string"},gift_card:{type:"string"},processing_fee:{type:"string"},sattlement_amount:{type:"string"}}}}}})).data("kendoGrid")},todays_transactions_rewards:function(){$("#todays_transactions_rewards").kendoGrid(l.extend("filterable",{columns:[{field:"name",title:"Program"},{field:"amount",title:"Available Rewards ($)",width:250},{field:"rewards",title:"Rewards Redeemed ($)",width:250},{field:"rewards_program",title:"Points<br/>Used",width:250},{field:"points_used",title:"Available Points",width:250},{command:[{name:"VIEW",iconClass:"k-icon k-i-preview preview_icon"}]}],dataSource:{data:trasactionRewardArray,pageSize:5,schema:{model:{id:"trasactionRewardID",fields:{trasactionRewardID:{editable:!1,nullable:!0},name:{type:"string"},rewards:{type:"string"},rewards_program:{type:"string"},points_used:{type:"number"}}}}}}))},available_rewards_var_grid:function(){$("#available_rewards_grid").kendoGrid(l.extend("filterable",{toolbar:[{name:"create",text:"&nbsp;Add New Record",iconClass:"fa fa-plus"}],columns:[{field:"name",title:"Name",width:300,editor:function(e,t){var a=$("<input class='k-input k-textbox'/>");a.attr("name",t.field),a.attr("placeholder","Name"),a.appendTo(e)}},{field:"description",title:"Description",width:500,editor:function(e,t){var a=$("<input class='k-input k-textbox'/>");a.attr("description",t.field),a.attr("placeholder","Description"),a.appendTo(e)}},{field:"point_value",title:"Point Value",width:150},{command:["destroy"],title:"&nbsp;"}],editable:{createAt:"bottom",mode:"inline"},dataSource:{data:availableRewards,pageSize:5,schema:{model:{id:"availableRewardsID",fields:{availableRewardsID:{editable:!1,nullable:!0},name:{type:"string"},description:{type:"string"},point_value:{type:"string"}}}}}})).data("kendoGrid")},loyalty_todays_transaction:function(){$("#loyalty_todays_transaction").kendoGrid(l.extend("filterable",{columns:[{field:"redeemer",title:"Customer",width:250},{field:"purchaser",title:"Purchaser",width:250},{field:"amount",title:"Purchase<br/>Amount",width:150},{field:"loyalty",title:"Discount<br/>Amount",width:100},{field:"loyalty_program",title:"Program",width:130},{command:[{name:"VIEW",iconClass:"k-icon k-i-preview preview_icon"}]}],dataSource:{data:loyaltyTodayTransctionArray,pageSize:5,schema:{model:{id:"loyaltyTodayTransctiondID",fields:{loyaltyTodayTransctiondID:{editable:!1,nullable:!0},redeemer:{type:"string"},purchaser:{type:"string"},amount:{type:"string"},loyalty:{type:"string"},loyalty_program:{type:"string"}}}}}})).data("kendoGrid")},loyalty_available_loyalty_program:function(){$("#loyalty_available_loyalty_program").kendoGrid(l.extend("filterable",{toolbar:[{name:"create",text:"&nbsp;Add New Record",iconClass:"fa fa-plus"}],columns:[{field:"name",title:"Name",width:250,editor:function(e,t){var a=$("<input class='k-input k-textbox'/>");a.attr("name",t.field),a.attr("placeholder","Name"),a.appendTo(e)}},{field:"description",title:"Description",width:400,editor:function(e,t){var a=$("<input class='k-input k-textbox'/>");a.attr("description",t.field),a.attr("placeholder","Description"),a.appendTo(e)}},{field:"frequency",title:"Frequency",width:100,editor:function(e,t){var a=$("<input class='k-input k-textbox'/>");a.attr("frequency",t.field),a.attr("placeholder","Frequency"),a.appendTo(e)}},{field:"active_date",title:"Active Date"},{field:"inactive_date",title:"Inactive Date"},{command:["destroy"],title:"&nbsp;"}],editable:{createAt:"bottom",mode:"inline"},dataSource:{data:loyaltyAvailableLoyaltyProgramArray,pageSize:5,schema:{model:{id:"loyalty_avialableLoyaltyProgramID",fields:{loyalty_avialableLoyaltyProgramID:{editable:!1,nullable:!0},name:{type:"string"},description:{type:"string"},frequency:{type:"string"},active_date:{editable:!1,type:"date"},inactive_date:{type:"date"}}}}}})).data("kendoGrid")},gift_card_available_gift_card_program:function(){$("#gift_card_available_gift_card_program").kendoGrid(l.extend("filterable",{toolbar:[{name:"create",text:"&nbsp;Add New Record",iconClass:"fa fa-plus"}],columns:[{field:"name",title:"Name",width:200,editor:function(e,t){var a=$("<input class='k-input k-textbox'/>");a.attr("name",t.field),a.attr("placeholder","Name"),a.appendTo(e)}},{field:"description",title:"Description",width:400,editor:function(e,t){var a=$("<input class='k-input k-textbox'/>");a.attr("description",t.field),a.attr("placeholder","Description"),a.appendTo(e)}},{field:"price",title:"Price",width:150},{field:"giftCardValue",title:"Value",width:130,editor:function(e,t){var a=$("<input class='k-input k-textbox'/>");a.attr("giftCardValue",t.field),a.attr("placeholder","Gift Card Value"),a.appendTo(e)}},{field:"available_date",title:"Available Date",editor:function(e,t){var a=$("<input style='width: 100%'/>");a.attr("available_date",t.field),a.attr("placeholder","Select Date"),a.appendTo(e),$(a.attr("available_date",t.field)).kendoDateTimePicker({value:new Date,dateInput:!0})}},{command:["destroy"],title:"&nbsp;"}],editable:{createAt:"bottom",mode:"inline"},dataSource:{data:giftCardAvailableGiftCardProgramArray,pageSize:5,schema:{model:{id:"avialbleGiftCardProgramID",fields:{avialbleGiftCardProgramID:{editable:!1,nullable:!0},name:{type:"string"},description:{type:"string"},price:{type:"string"},giftCardValue:{type:"string"},available_date:{editable:!0,type:"date"}}}}}})).data("kendoGrid")},gift_card_customer_grid:function(){$("#gift_card_customer").kendoGrid(l.extend("filterable",{columns:[{field:"customer_name",title:"Customer Name",width:200},{field:"gift_card_name",title:"Gift Card Name",width:400},{field:"gift_card_number",title:"Gift Card Number",width:150},{field:"purchase_date",title:"Purchase Date",template:'#= kendo.toString(purchase_date,"MM/dd/yyyy") #'},{field:"card_value",title:"Card Value"}],dataSource:{data:gift_card_customer,pageSize:5,schema:{model:{id:"giftCardCustomerID",fields:{giftCardCustomerID:{editable:!1,nullable:!0},customer_name:{type:"string"},gift_card_name:{type:"string"},gift_card_number:{type:"string"},purchase_date:{type:"date"},card_value:{type:"string"}}}}}}))}};d.transaction_notify_grid(),d.finishedDocGrid(),d.customer_grid(),d.todays_transactions(),d.todays_transactions_rewards(),d.available_rewards_var_grid(),d.loyalty_todays_transaction(),d.loyalty_available_loyalty_program(),d.gift_card_available_gift_card_program(),d.gift_card_customer_grid(),$(window).resize(function(){t()}),kendoChartContainer={visitChart:function(){$("#visitChart").kendoChart({chartArea:{height:240},renderAs:"canvas",legend:{position:"top"},seriesDefaults:{type:"column"},series:[{name:"Repeat",data:[10,5,8,15,50]},{name:"New",data:[60,2,12,28,30]}],pannable:{lock:"y"},valueAxis:{labels:{format:"{0}"},line:{visible:!0},axisCrossingValue:0},categoryAxis:{categories:[2014,2015,2016,2017,2018],line:{visible:!0},labels:{padding:{top:0}}},tooltip:{visible:!0,format:"{0}",template:"#= series.name #: #= value #"}})},salesItemsChart:function(){$("#salesItemsChart").kendoChart({chartArea:{height:240},renderAs:"canvas",legend:{position:"top"},seriesDefaults:{type:"bar"},series:[{name:"Repeat",data:[10,5,8,15,50]},{name:"New",data:[60,2,12,28,30]}],pannable:{lock:"y"},valueAxis:{labels:{format:"{0}"},line:{visible:!0},axisCrossingValue:0},categoryAxis:{categories:[2014,2015,2016,2017,2018],line:{visible:!0},labels:{padding:{top:0}}},tooltip:{visible:!0,format:"{0}",template:"#= series.name #: #= value #"}})},VisitClaimedPointsChart:function(){$("#VisitClaimedPointsChart").kendoChart({chartArea:{height:230},renderAs:"canvas",legend:{position:"top"},seriesDefaults:{type:"column"},series:[{name:"Repeat",data:[10,5,8,15,50]},{name:"New",data:[60,2,12,28,30]}],pannable:{lock:"y"},valueAxis:{labels:{format:"{0}"},line:{visible:!0},axisCrossingValue:0},categoryAxis:{categories:[2014,2015,2016,2017,2018],line:{visible:!0},labels:{padding:{top:0}}},tooltip:{visible:!0,format:"{0}",template:"#= series.name #: #= value #"}})},loyaltyVisitChart:function(){$("#loyaltyVisitChart").kendoChart({chartArea:{height:230},renderAs:"canvas",legend:{position:"top"},seriesDefaults:{type:"column"},series:[{name:"Repeat",data:[10,5,8,15,50]},{name:"New",data:[60,2,12,28,30]}],pannable:{lock:"y"},valueAxis:{labels:{format:"{0}"},line:{visible:!0},axisCrossingValue:0},categoryAxis:{categories:[2014,2015,2016,2017,2018],line:{visible:!0},labels:{padding:{top:0}}},tooltip:{visible:!0,format:"{0}",template:"#= series.name #: #= value #"}})},giftCardVisitChart:function(){$("#giftCardVisitChart").kendoChart({chartArea:{height:230},renderAs:"canvas",legend:{position:"top"},seriesDefaults:{type:"column"},series:[{name:"Repeat",data:[10,5,8,15,50]},{name:"New",data:[60,2,12,28,30]}],pannable:{lock:"y"},valueAxis:{labels:{format:"{0}"},line:{visible:!0},axisCrossingValue:0},categoryAxis:{categories:[2014,2015,2016,2017,2018],line:{visible:!0},labels:{padding:{top:0}}},tooltip:{visible:!0,format:"{0}",template:"#= series.name #: #= value #"}})}},kendoChartContainer.visitChart(),kendoChartContainer.salesItemsChart(),kendoChartContainer.VisitClaimedPointsChart(),kendoChartContainer.loyaltyVisitChart(),kendoChartContainer.giftCardVisitChart(),$(document).bind("kendo:skinChange",kendoChartContainer.visitChart,kendoChartContainer.salesItemsChart,kendoChartContainer.VisitClaimedPointsChart,kendoChartContainer.loyaltyVisitChart,kendoChartContainer.giftCardVisitChart),$(window).on("resize orientationchange",function(){kendo.resize($("body"))}),$('a[data-toggle="tab"]').on("shown.bs.tab",function(e){kendo.resize($("body"))});var s=$('input[name="start_date"]').kendoDatePicker({change:a,weekNumber:!0}).data("kendoDatePicker"),c=$('input[name="end_date"]').kendoDatePicker({change:i,weekNumber:!0}).data("kendoDatePicker");s.max(c.value()),c.min(s.value())});